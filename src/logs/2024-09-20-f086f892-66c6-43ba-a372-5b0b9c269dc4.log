{"level":"info","ts":"2024-09-20T20:32:55.281+0330","caller":"db/postgress.go:41","msg":"Db connection established","AppName":"MyApp","LoggerName":"Zaplog","Category":"Postgres","SubCategory":"Startup"}
{"level":"info","ts":"2024-09-20T20:32:55.515+0330","caller":"migration/1_Init.go:73","msg":"tables created","AppName":"MyApp","LoggerName":"Zaplog","Category":"Postgres","SubCategory":"Migration"}
{"level":"info","ts":"2024-09-20T20:34:07.692+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","Path":"/api/v1/users/login-by-username","Latency":0.3648479,"BodySize":597,"ResponseBody":"{\"result\":{\"accessToken\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJFbWFpbCI6ImFkbWluQGFkbWluLmNvbSIsIkV4cCI6MTcyNjkzODI0NywiRmlyc3ROYW1lIjoia2lhcmFzaCIsIkxhc3ROYW1lIjoic2hhbXNzIiwiTW9iaWxlTnVtYmVyIjoiMDkzNzgzNjA5NDAiLCJSb2xlcyI6WyJhZG1pbiJdLCJVc2VySWQiOjEsIlVzZXJuYW1lIjoiIn0.VtMIWxhv-xx6XSOxxEnrbM4i88lW1WXz04W0EjQ35lo\",\"refreshToken\":\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJFeHAiOjE3MjY4NTU0NDcsIlVzZXJJZCI6MX0.Kumru2FJBOEEIguATEFfX6m68BVl4lLNbLaYXMYE6nA\",\"accessTokenExpireTime\":1726938247,\"refreshTokenExpireTime\":1726855447},\"success\":true,\"resultCode\":0,\"validationErrors\":null,\"error\":null}","Category":"RequestResponse","SubCategory":"Api","ClientIp":"::1","Method":"POST","StatusCode":201,"ErrorMessage":"","RequestBody":"{\n  \"password\": \"12345678\",\n  \"username\": \"admin\"\n}"}
{"level":"info","ts":"2024-09-20T20:35:13.917+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","ClientIp":"::1","Method":"GET","Latency":0.2807664,"BodySize":419,"Category":"RequestResponse","Path":"/api/v1/car-models/:id","StatusCode":200,"ErrorMessage":"","RequestBody":"","ResponseBody":"{\"result\":{\"id\":1,\"name\":\"Peride\",\"carType\":{\"id\":1,\"name\":\"Crossover\"},\"company\":{\"id\":1,\"name\":\"Saipa\",\"country\":{\"id\":1,\"name\":\"Iran\"}},\"gearbox\":{\"id\":1,\"name\":\"Manual\"},\"carModelColors\":[{\"id\":1,\"color\":{\"id\":4,\"name\":\"red\",\"hexCode\":\"#ff0000\"}}],\"carModelYears\":[{\"id\":1,\"persianYear\":{\"id\":3,\"persianTitle\":\"1400\",\"year\":1400},\"carModelId\":1}]},\"success\":true,\"resultCode\":0,\"validationErrors\":null,\"error\":null}","SubCategory":"Api"}
{"level":"info","ts":"2024-09-20T20:37:02.840+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","Method":"GET","ErrorMessage":"","RequestBody":"","Category":"RequestResponse","BodySize":87,"ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":40001,\"validationErrors\":null,\"error\":null}","SubCategory":"Api","Path":"/api/v1/car-models/:id","ClientIp":"::1","Latency":0.0011727,"StatusCode":404}
{"level":"info","ts":"2024-09-20T20:37:23.502+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","SubCategory":"Api","StatusCode":200,"ResponseBody":"{\"result\":{\"id\":2,\"name\":\"Peride 131\",\"carType\":{\"id\":5,\"name\":\"Hatchback\"},\"company\":{\"id\":1,\"name\":\"Saipa\",\"country\":{\"id\":1,\"name\":\"Iran\"}},\"gearbox\":{\"id\":1,\"name\":\"Manual\"},\"carModelColors\":[{\"id\":2,\"color\":{\"id\":1,\"name\":\"Black\",\"hexCode\":\"#000000\"}},{\"id\":3,\"color\":{\"id\":3,\"name\":\"Blue\",\"hexCode\":\"#0000ff\"}}]},\"success\":true,\"resultCode\":0,\"validationErrors\":null,\"error\":null}","Category":"RequestResponse","Latency":0.0388779,"ErrorMessage":"","BodySize":386,"RequestBody":"","Path":"/api/v1/car-models/:id","ClientIp":"::1","Method":"GET"}
{"level":"info","ts":"2024-09-20T20:37:37.042+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","ClientIp":"::1","Method":"GET","BodySize":419,"Category":"RequestResponse","RequestBody":"","ResponseBody":"{\"result\":{\"id\":1,\"name\":\"Peride\",\"carType\":{\"id\":1,\"name\":\"Crossover\"},\"company\":{\"id\":1,\"name\":\"Saipa\",\"country\":{\"id\":1,\"name\":\"Iran\"}},\"gearbox\":{\"id\":1,\"name\":\"Manual\"},\"carModelColors\":[{\"id\":1,\"color\":{\"id\":4,\"name\":\"red\",\"hexCode\":\"#ff0000\"}}],\"carModelYears\":[{\"id\":1,\"persianYear\":{\"id\":3,\"persianTitle\":\"1400\",\"year\":1400},\"carModelId\":1}]},\"success\":true,\"resultCode\":0,\"validationErrors\":null,\"error\":null}","SubCategory":"Api","Path":"/api/v1/car-models/:id","Latency":0.0397991,"StatusCode":200,"ErrorMessage":""}
{"level":"info","ts":"2024-09-20T20:39:02.414+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","BodySize":87,"ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":40001,\"validationErrors\":null,\"error\":null}","Category":"RequestResponse","ClientIp":"::1","Latency":0.0029913,"StatusCode":400,"RequestBody":"{\n  \"carModelYearId\": 1,\n  \"price\": 200000000,\n  \"priceAt\": \"2023-05-12T00:00:00\"\n}","SubCategory":"Api","Path":"/api/v1/car-model-price-histories/","Method":"POST","ErrorMessage":""}
{"level":"info","ts":"2024-09-20T20:39:47.523+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","ErrorMessage":"","BodySize":87,"ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":40001,\"validationErrors\":null,\"error\":null}","Path":"/api/v1/car-model-price-histories/","Method":"POST","Latency":0.0010008,"StatusCode":400,"ClientIp":"::1","RequestBody":"{\n  \"carModelYearId\": 1,\n  \"price\": 8500,\n  \"priceAt\": \"2023-05-12T00:00:00\"\n}","Category":"RequestResponse","SubCategory":"Api"}
{"level":"info","ts":"2024-09-20T20:40:22.741+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","Path":"/api/v1/car-model-price-histories/","Method":"POST","Latency":0.0015283,"StatusCode":400,"BodySize":87,"SubCategory":"Api","ClientIp":"::1","ErrorMessage":"","RequestBody":"{\n  \"carModelYearId\": 1,\n  \"price\": 8500,\n  \"priceAt\": \"2023-05-12T00:00:00\"\n}","ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":40001,\"validationErrors\":null,\"error\":null}","Category":"RequestResponse"}
{"level":"info","ts":"2024-09-20T20:40:50.479+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","ErrorMessage":"","BodySize":87,"RequestBody":"{\n  \"carModelYearId\":1,\n  \"price\": 8500,\n  \"priceAt\": \"2023-05-12T00:00:00\"\n}","ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":40001,\"validationErrors\":null,\"error\":null}","Category":"RequestResponse","ClientIp":"::1","Method":"POST","StatusCode":400,"Path":"/api/v1/car-model-price-histories/","Latency":0,"SubCategory":"Api"}
{"level":"info","ts":"2024-09-20T20:41:08.799+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","Latency":0,"ErrorMessage":"","BodySize":87,"ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":40001,\"validationErrors\":null,\"error\":null}","Category":"RequestResponse","Path":"/api/v1/car-model-price-histories/","ClientIp":"::1","RequestBody":"{\n  \"carModelYearId\": 1,\n  \"price\": 850,\n  \"priceAt\": \"2023-05-12T00:00:00\"\n}","SubCategory":"Api","Method":"POST","StatusCode":400}
{"level":"info","ts":"2024-09-20T20:44:26.251+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","Latency":0.5432421,"StatusCode":201,"ErrorMessage":"","RequestBody":"{\n  \"carModelYearId\": 1,\n  \"price\": 850,\n  \"priceAt\": \"2023-05-12T00:00:00Z\"\n}","SubCategory":"Api","ClientIp":"::1","Method":"POST","BodySize":155,"ResponseBody":"{\"result\":{\"id\":1,\"carModelYearId\":1,\"priceAt\":\"2023-05-12T03:30:00+03:30\",\"price\":850},\"success\":true,\"resultCode\":0,\"validationErrors\":null,\"error\":null}","Category":"RequestResponse","Path":"/api/v1/car-model-price-histories/"}
{"level":"error","ts":"2024-09-20T20:45:02.727+0330","caller":"services/base_service.go:48","msg":"ERROR: insert or update on table \"car_model_price_histories\" violates foreign key constraint \"fk_car_model_years_car_model_price_histories\" (SQLSTATE 23503)","AppName":"MyApp","LoggerName":"Zaplog","Category":"Postgres","SubCategory":"Insert","stacktrace":"user-service/services.(*BaseService[...]).Create\n\tD:/Golang Project/test/test2/services/base_service.go:48\nuser-service/services.(*CarModelPriceHistoryService).Create\n\tD:/Golang Project/test/test2/services/car_model_price_history_service.go:29\nuser-service/api/handlers.Create[...]\n\tD:/Golang Project/test/test2/api/handlers/base.go:25\nuser-service/api/handlers.(*CarModelPriceHistoryHandler).Create\n\tD:/Golang Project/test/test2/api/handlers/car_model_price_history.go:34\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Authorization.func1\n\tD:/Golang Project/test/test2/api/middleware/auth.go:79\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Authentication.func1\n\tD:/Golang Project/test/test2/api/middleware/auth.go:55\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.LimitByRequest.func1\n\tD:/Golang Project/test/test2/api/middleware/limitter.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Cors.func1\n\tD:/Golang Project/test/test2/api/middleware/cors.go:23\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.structuredLogger.func1\n\tD:/Golang Project/test/test2/api/middleware/logger.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3210\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2092"}
{"level":"info","ts":"2024-09-20T20:45:02.733+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","Latency":0.0366976,"BodySize":87,"RequestBody":"{\n  \"carModelYearId\": 2,\n  \"price\": 9600,\n  \"priceAt\": \"2023-05-12T00:00:00Z\"\n}","Category":"RequestResponse","SubCategory":"Api","ClientIp":"::1","Method":"POST","ErrorMessage":"","ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":50002,\"validationErrors\":null,\"error\":null}","Path":"/api/v1/car-model-price-histories/","StatusCode":500}
{"level":"error","ts":"2024-09-20T20:45:15.372+0330","caller":"services/base_service.go:48","msg":"ERROR: insert or update on table \"car_model_price_histories\" violates foreign key constraint \"fk_car_model_years_car_model_price_histories\" (SQLSTATE 23503)","AppName":"MyApp","LoggerName":"Zaplog","SubCategory":"Insert","Category":"Postgres","stacktrace":"user-service/services.(*BaseService[...]).Create\n\tD:/Golang Project/test/test2/services/base_service.go:48\nuser-service/services.(*CarModelPriceHistoryService).Create\n\tD:/Golang Project/test/test2/services/car_model_price_history_service.go:29\nuser-service/api/handlers.Create[...]\n\tD:/Golang Project/test/test2/api/handlers/base.go:25\nuser-service/api/handlers.(*CarModelPriceHistoryHandler).Create\n\tD:/Golang Project/test/test2/api/handlers/car_model_price_history.go:34\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Authorization.func1\n\tD:/Golang Project/test/test2/api/middleware/auth.go:79\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Authentication.func1\n\tD:/Golang Project/test/test2/api/middleware/auth.go:55\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.LimitByRequest.func1\n\tD:/Golang Project/test/test2/api/middleware/limitter.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Cors.func1\n\tD:/Golang Project/test/test2/api/middleware/cors.go:23\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.structuredLogger.func1\n\tD:/Golang Project/test/test2/api/middleware/logger.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3210\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2092"}
{"level":"info","ts":"2024-09-20T20:45:15.372+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","ErrorMessage":"","ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":50002,\"validationErrors\":null,\"error\":null}","SubCategory":"Api","Category":"RequestResponse","Path":"/api/v1/car-model-price-histories/","ClientIp":"::1","Method":"POST","Latency":0.0132782,"StatusCode":500,"BodySize":87,"RequestBody":"{\n  \"carModelYearId\": 2,\n  \"price\": 9600,\n  \"priceAt\": \"2023-05-13T00:00:00Z\"\n}"}
{"level":"info","ts":"2024-09-20T20:45:25.529+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","Method":"POST","Latency":0.0455311,"StatusCode":201,"ErrorMessage":"","ResponseBody":"{\"result\":{\"id\":4,\"carModelYearId\":1,\"priceAt\":\"2023-05-13T03:30:00+03:30\",\"price\":9600},\"success\":true,\"resultCode\":0,\"validationErrors\":null,\"error\":null}","SubCategory":"Api","Path":"/api/v1/car-model-price-histories/","ClientIp":"::1","BodySize":156,"RequestBody":"{\n  \"carModelYearId\": 1,\n  \"price\": 9600,\n  \"priceAt\": \"2023-05-13T00:00:00Z\"\n}","Category":"RequestResponse"}
{"level":"info","ts":"2024-09-20T20:45:34.403+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","ClientIp":"::1","StatusCode":200,"ResponseBody":"{\"result\":{\"id\":1,\"name\":\"Peride\",\"carType\":{\"id\":1,\"name\":\"Crossover\"},\"company\":{\"id\":1,\"name\":\"Saipa\",\"country\":{\"id\":1,\"name\":\"Iran\"}},\"gearbox\":{\"id\":1,\"name\":\"Manual\"},\"carModelColors\":[{\"id\":1,\"color\":{\"id\":4,\"name\":\"red\",\"hexCode\":\"#ff0000\"}}],\"carModelYears\":[{\"id\":1,\"persianYear\":{\"id\":3,\"persianTitle\":\"1400\",\"year\":1400},\"carModelId\":1,\"carModelPriceHistories\":[{\"id\":1,\"carModelYearId\":1,\"priceAt\":\"2023-05-12T03:30:00+03:30\",\"price\":850},{\"id\":4,\"carModelYearId\":1,\"priceAt\":\"2023-05-13T03:30:00+03:30\",\"price\":9600}]}]},\"success\":true,\"resultCode\":0,\"validationErrors\":null,\"error\":null}","Category":"RequestResponse","Path":"/api/v1/car-models/:id","Latency":0.1587644,"ErrorMessage":"","BodySize":603,"RequestBody":"","SubCategory":"Api","Method":"GET"}
