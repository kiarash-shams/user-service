{"level":"info","ts":"2024-10-07T14:10:35.044+0330","caller":"db/postgress.go:41","msg":"Db connection established","AppName":"MyApp","LoggerName":"Zaplog","SubCategory":"Startup","Category":"Postgres"}
{"level":"info","ts":"2024-10-07T14:10:35.072+0330","caller":"migration/1_Init.go:48","msg":"tables created","AppName":"MyApp","LoggerName":"Zaplog","Category":"Postgres","SubCategory":"Migration"}
{"level":"error","ts":"2024-10-07T14:11:33.528+0330","caller":"services/base_service.go:51","msg":"ERROR: duplicate key value violates unique constraint \"uni_profiles_user_id\" (SQLSTATE 23505)","AppName":"MyApp","LoggerName":"Zaplog","Category":"Postgres","SubCategory":"Insert","stacktrace":"user-service/services.(*BaseService[...]).Create\n\tD:/Golang Project/user-service/src/services/base_service.go:51\nuser-service/services.(*ProfileService).Create\n\tD:/Golang Project/user-service/src/services/profile_service.go:29\nuser-service/api/handlers.Create[...]\n\tD:/Golang Project/user-service/src/api/handlers/base.go:25\nuser-service/api/handlers.(*ProfileHandler).Create\n\tD:/Golang Project/user-service/src/api/handlers/profile.go:34\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.LimitByRequest.func1\n\tD:/Golang Project/user-service/src/api/middleware/limitter.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Prometheus.func1\n\tD:/Golang Project/user-service/src/api/middleware/prometheus.go:16\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Cors.func1\n\tD:/Golang Project/user-service/src/api/middleware/cors.go:23\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.structuredLogger.func1\n\tD:/Golang Project/user-service/src/api/middleware/logger.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3210\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2092"}
{"level":"info","ts":"2024-10-07T14:11:33.530+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","ClientIp":"::1","ErrorMessage":"","BodySize":87,"Category":"RequestResponse","SubCategory":"Api","Path":"/api/v1/profiles/","Method":"POST","Latency":0.0343768,"StatusCode":500,"RequestBody":"{\n  \"dob\": \"1372/02/20\",\n  \"first_name\": \"kiarash\",\n  \"last_name\": \"shams\",\n  \"nid\": \"0015792302\",\n  \"userId\": 1\n}","ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":50002,\"validationErrors\":null,\"error\":null}"}
{"level":"error","ts":"2024-10-07T14:11:48.612+0330","caller":"services/base_service.go:51","msg":"ERROR: duplicate key value violates unique constraint \"uni_profiles_user_id\" (SQLSTATE 23505)","AppName":"MyApp","LoggerName":"Zaplog","Category":"Postgres","SubCategory":"Insert","stacktrace":"user-service/services.(*BaseService[...]).Create\n\tD:/Golang Project/user-service/src/services/base_service.go:51\nuser-service/services.(*ProfileService).Create\n\tD:/Golang Project/user-service/src/services/profile_service.go:29\nuser-service/api/handlers.Create[...]\n\tD:/Golang Project/user-service/src/api/handlers/base.go:25\nuser-service/api/handlers.(*ProfileHandler).Create\n\tD:/Golang Project/user-service/src/api/handlers/profile.go:34\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.LimitByRequest.func1\n\tD:/Golang Project/user-service/src/api/middleware/limitter.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Prometheus.func1\n\tD:/Golang Project/user-service/src/api/middleware/prometheus.go:16\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Cors.func1\n\tD:/Golang Project/user-service/src/api/middleware/cors.go:23\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.structuredLogger.func1\n\tD:/Golang Project/user-service/src/api/middleware/logger.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3210\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2092"}
{"level":"info","ts":"2024-10-07T14:11:48.617+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","ClientIp":"::1","StatusCode":500,"BodySize":87,"ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":50002,\"validationErrors\":null,\"error\":null}","Category":"RequestResponse","SubCategory":"Api","Path":"/api/v1/profiles/","Method":"POST","Latency":0.0162814,"ErrorMessage":"","RequestBody":"{\n  \"dob\": \"1372/02/20\",\n  \"first_name\": \"kiarash\",\n  \"last_name\": \"shams\",\n  \"nid\": \"0015792302\",\n  \"userId\": 1\n}"}
{"level":"info","ts":"2024-10-07T14:12:55.334+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","Method":"POST","Latency":0.0209709,"StatusCode":200,"ErrorMessage":"","BodySize":218,"RequestBody":"{\n  \n  \"pageNumber\": 0,\n  \"pageSize\": 0\n}","ResponseBody":"{\"result\":{\"pageNumber\":1,\"pageSize\":0,\"totalRows\":1,\"totalPages\":1,\"hasPreviousPage\":false,\"hasNextPage\":false,\"items\":[{\"id\":1,\"nid\":\"0015792307\"}]},\"success\":true,\"resultCode\":0,\"validationErrors\":null,\"error\":null}","Path":"/api/v1/profiles/get-by-filter","Category":"RequestResponse","SubCategory":"Api","ClientIp":"::1"}
{"level":"error","ts":"2024-10-07T14:13:36.125+0330","caller":"services/base_service.go:51","msg":"ERROR: duplicate key value violates unique constraint \"uni_profiles_user_id\" (SQLSTATE 23505)","AppName":"MyApp","LoggerName":"Zaplog","Category":"Postgres","SubCategory":"Insert","stacktrace":"user-service/services.(*BaseService[...]).Create\n\tD:/Golang Project/user-service/src/services/base_service.go:51\nuser-service/services.(*ProfileService).Create\n\tD:/Golang Project/user-service/src/services/profile_service.go:29\nuser-service/api/handlers.Create[...]\n\tD:/Golang Project/user-service/src/api/handlers/base.go:25\nuser-service/api/handlers.(*ProfileHandler).Create\n\tD:/Golang Project/user-service/src/api/handlers/profile.go:34\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.LimitByRequest.func1\n\tD:/Golang Project/user-service/src/api/middleware/limitter.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Prometheus.func1\n\tD:/Golang Project/user-service/src/api/middleware/prometheus.go:16\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Cors.func1\n\tD:/Golang Project/user-service/src/api/middleware/cors.go:23\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.structuredLogger.func1\n\tD:/Golang Project/user-service/src/api/middleware/logger.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3210\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2092"}
{"level":"info","ts":"2024-10-07T14:13:36.126+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","RequestBody":"{\n  \"dob\": \"1372/02/20\",\n  \"first_name\": \"kiarwash\",\n  \"last_name\": \"shawms\",\n  \"nid\": \"0015792302\",\n  \"userId\": 1\n}","Category":"RequestResponse","ErrorMessage":"","ClientIp":"::1","Method":"POST","Latency":0.0109457,"StatusCode":500,"BodySize":87,"ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":50002,\"validationErrors\":null,\"error\":null}","SubCategory":"Api","Path":"/api/v1/profiles/"}
{"level":"info","ts":"2024-10-07T14:14:37.814+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","StatusCode":201,"ErrorMessage":"","BodySize":105,"RequestBody":"{\n  \"dob\": \"1372/02/20\",\n  \"first_name\": \"kiarwash\",\n  \"last_name\": \"shawms\",\n  \"nid\": \"0015792302\",\n  \"userId\": 2\n}","ResponseBody":"{\"result\":{\"id\":5,\"nid\":\"0015792302\"},\"success\":true,\"resultCode\":0,\"validationErrors\":null,\"error\":null}","SubCategory":"Api","Method":"POST","Latency":0.0596607,"Category":"RequestResponse","Path":"/api/v1/profiles/","ClientIp":"::1"}
{"level":"error","ts":"2024-10-07T14:15:17.130+0330","caller":"services/base_service.go:51","msg":"ERROR: duplicate key value violates unique constraint \"uni_profiles_user_id\" (SQLSTATE 23505)","AppName":"MyApp","LoggerName":"Zaplog","Category":"Postgres","SubCategory":"Insert","stacktrace":"user-service/services.(*BaseService[...]).Create\n\tD:/Golang Project/user-service/src/services/base_service.go:51\nuser-service/services.(*ProfileService).Create\n\tD:/Golang Project/user-service/src/services/profile_service.go:29\nuser-service/api/handlers.Create[...]\n\tD:/Golang Project/user-service/src/api/handlers/base.go:25\nuser-service/api/handlers.(*ProfileHandler).Create\n\tD:/Golang Project/user-service/src/api/handlers/profile.go:34\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.LimitByRequest.func1\n\tD:/Golang Project/user-service/src/api/middleware/limitter.go:19\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Prometheus.func1\n\tD:/Golang Project/user-service/src/api/middleware/prometheus.go:16\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.Cors.func1\n\tD:/Golang Project/user-service/src/api/middleware/cors.go:23\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nuser-service/api/middleware.structuredLogger.func1\n\tD:/Golang Project/user-service/src/api/middleware/logger.go:49\ngithub.com/gin-gonic/gin.(*Context).Next\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\tC:/Users/10/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3210\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2092"}
{"level":"info","ts":"2024-10-07T14:15:17.130+0330","caller":"middleware/logger.go:76","msg":"","AppName":"MyApp","LoggerName":"Zaplog","SubCategory":"Api","ClientIp":"::1","Latency":0.0078916,"ErrorMessage":"","RequestBody":"{\n  \"dob\": \"1372/02/20\",\n  \"first_name\": \"kiarwash\",\n  \"last_name\": \"shawms\",\n  \"nid\": \"0015792302\",\n  \"userId\": 2\n}","Category":"RequestResponse","Path":"/api/v1/profiles/","Method":"POST","StatusCode":500,"BodySize":87,"ResponseBody":"{\"result\":null,\"success\":false,\"resultCode\":50002,\"validationErrors\":null,\"error\":null}"}
